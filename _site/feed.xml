<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>西土城伍伍慧</title>
    <description>西土城伍伍慧的博客
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 29 Aug 2017 22:07:54 +0800</pubDate>
    <lastBuildDate>Tue, 29 Aug 2017 22:07:54 +0800</lastBuildDate>
    <generator>Jekyll v3.5.2</generator>
    
      <item>
        <title>ZSH &amp; Oh-My-Zsh配置</title>
        <description>&lt;h3 id=&quot;why-zsh&quot;&gt;Why ZSH？&lt;/h3&gt;
&lt;p&gt;之前一直在使用BASH和Linux系统做交互。虽然BASH很强大，但是在某些情况下&lt;strong&gt;非常累眼且不方便&lt;/strong&gt;，比如：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在写完C/C++代码后执行make时，由于码力低下，会有超级多编译错误（毕竟不是用宇宙第一IDE Visual Studio写程序，好多问题写的时候就能查出来），这些编译错误信息会像瀑布一样疯狂地在屏幕上滚动。在这样一堆错误信息中，要找到第一个出错的位置（实际上是运行make命令的那行）相当费眼，因为命令行提示符&lt;code class=&quot;highlighter-rouge&quot;&gt;xxx@xxx$ make&lt;/code&gt;并没有高亮，眼神不好的我完全找不到。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在一个git库下进行开发的时候，每次都需要用&lt;code class=&quot;highlighter-rouge&quot;&gt;git status&lt;/code&gt;来查看库的状态，很不方便&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Terminal全屏coding的时候，想看时间，还得退出全屏看操作系统状态栏才行，这样切屏很影响效率&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;在使用BASH进行自动补全的时候，必须通过prefix来补全，有时候却希望可以在字符串的任意位置进行补全，比如有下面这样一个文件夹：
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    ABC ABC2 ABC3 ABC4 CBA CBA2
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;p&gt;如果要匹配ABC3，在BASH里面需要打&lt;code class=&quot;highlighter-rouge&quot;&gt;A&lt;/code&gt;+&lt;code class=&quot;highlighter-rouge&quot;&gt;Tab&lt;/code&gt;+&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;来补全，但实际上可以只打&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;就能补全&lt;code class=&quot;highlighter-rouge&quot;&gt;ABC3&lt;/code&gt;，因为只有它的名字里才有字符&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;经常会遇到这种情况：希望按&lt;code class=&quot;highlighter-rouge&quot;&gt;UP&lt;/code&gt;寻找来重复刚刚执行过的命令，然而想找的命令可能“比较久远”，需要按好久&lt;code class=&quot;highlighter-rouge&quot;&gt;UP&lt;/code&gt;才能找着，比如：
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  hahaha  &amp;lt;--- This is what I want to execute
  heihei
  ...     &amp;lt;--- So many other commands here
  hohoho
  xxx@xxx&amp;amp; ha&amp;lt;tab&amp;gt;  &amp;lt;--- Just type ha and press tab
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;p&gt;我们可以只打出想要的那个命令的前缀，ZSH会通过字符串匹配自动地遍历所有以那个前缀开头的命令，省去了不断地按&lt;code class=&quot;highlighter-rouge&quot;&gt;UP&lt;/code&gt;去寻找想要的命令的操作&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;安装zsh&quot;&gt;安装ZSH&lt;/h3&gt;
&lt;p&gt;由于在公司服务器上没有权限sudo，所以选择从source code编译安装，首先从&lt;a href=&quot;http://zsh.sourceforge.net/Arc/source.html&quot;&gt;zsh官网&lt;/a&gt;下载&lt;code class=&quot;highlighter-rouge&quot;&gt;zsh-X.X.X.tar.gz&lt;/code&gt;,解压并进入对应目录：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget &amp;lt;link to gzip&amp;gt;
tar -zxvf zsh-X.X.X.tar.gz
cd zsh-X.X.X
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;然后运行以下命令安装：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./configure --prefix=$HOME
make -j $(nproc)
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;安装过程中可能会出现这个问题：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;configure: error: &quot;No terminal handling library was found on your system. This is probably a library called curses or ncurses. You may need to install a package called 'curses-devel' or 'ncurses-devel' on your system&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;原因是这个curses-devel或ncurses-devel没有安装，所以还需要找到其中一个的source code编译安装一下：下载&lt;a href=&quot;https://launchpad.net/ubuntu/+source/ncurses/&quot;&gt;ncurses-devel&lt;/a&gt;，解压并进入目录执行&lt;code class=&quot;highlighter-rouge&quot;&gt;./configure --prefix=$HOME; make -j $(nproc); make install&lt;/code&gt;安装。安装完后要把对应的&lt;code class=&quot;highlighter-rouge&quot;&gt;include&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;lib&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;bin&lt;/code&gt;所在的目录分别加入到环境变量:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export CFLAGS=-I/path/to/include
export CPPFLAGS=-I/path/to/include
export LDFLAGS=-L/path/to/lib
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;再执行刚刚的&lt;code class=&quot;highlighter-rouge&quot;&gt;configure&lt;/code&gt;等命令就可以正常安装ZSH了&lt;/p&gt;

&lt;h3 id=&quot;让zsh成为默认shell&quot;&gt;让ZSH成为默认SHELL&lt;/h3&gt;
&lt;p&gt;需要在&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.bashrc&lt;/code&gt;后面加上一下几行：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export SHELL=$HOME/bin/zsh
exec $HOME/bin/zsh -l
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt; 由于刚刚安装ZSH的时候用到了&lt;code class=&quot;highlighter-rouge&quot;&gt;path/to/lib&lt;/code&gt;这个链接库路径，所以需要确保在&lt;code class=&quot;highlighter-rouge&quot;&gt;.bashrc&lt;/code&gt;加上上面两句话之前，正确设置&lt;code class=&quot;highlighter-rouge&quot;&gt;LD_LIBRARY_PATH&lt;/code&gt;这个环境变量，不然再次登入会报错，提示找不到ncurses之类的错误，这时候只能通过远程拷贝命令&lt;code class=&quot;highlighter-rouge&quot;&gt;scp&lt;/code&gt;把一个没有加入上面两行的bashrc拷贝到服务器的HOME下。设置完毕再次登入时会提示没有&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;这个配置文件，输入&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;，ZSH会自动帮你建立一个空的&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;并进入到ZSH中&lt;/p&gt;

&lt;h3 id=&quot;安装oh-my-zsh&quot;&gt;安装Oh-My-Zsh&lt;/h3&gt;
&lt;p&gt;直接按照Oh-My-Zsh的README中的步骤安装可能会遇到以下错误：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Zsh is not installed! Please install zsh first!
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;这是由于我们安装的ZSH是在自己的HOME目录下，所以不会出现在&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/shells&lt;/code&gt;里面，而安装Oh-My-Zsh所执行的命令会在最后调用&lt;code class=&quot;highlighter-rouge&quot;&gt;chsh&lt;/code&gt;命令，这个命令最后会在&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/shells&lt;/code&gt;里面寻找可用的SHELL，所以肯定会失败，解决办法如下（参考了&lt;a href=&quot;https://superuser.com/questions/1114732/how-do-i-install-oh-my-zsh-with-a-custom-zsh-install/1114839&quot;&gt;stack-over-flow&lt;/a&gt;的高票答案）：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone --depth=1 https://github.com/robbyrussell/oh-my-zsh.git $HOME/.oh-my-zsh
cp $HOME/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;配置&quot;&gt;配置&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;主题&lt;/strong&gt;: 在&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;里面设置&lt;code class=&quot;highlighter-rouge&quot;&gt;ZSH_THEME=&quot;obraun&quot;&lt;/code&gt;，大量主题可以参考&lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh/wiki/themes&quot;&gt;主题截图&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Mon, 28 Aug 2017 19:51:00 +0800</pubDate>
        <link>http://localhost:4000/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/zsh/2017/08/28/zsh.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/zsh/2017/08/28/zsh.html</guid>
        
        
        <category>开发环境</category>
        
        <category>Zsh</category>
        
      </item>
    
  </channel>
</rss>
